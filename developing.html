---
layout:           doc
title:            Developing
permalink:        /developing/
previous_section: /examples/
comments:         true
---

<div class="bv-heading">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <h1>Developing</h1>
                <p>Help you develop new validator</p>
            </div>

            <div class="col-md-4">
                <div class="bv-ad">
                    {% include ad.html %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="bv-sidebar">
                <ul>
                    <li>
                        <a href="#writing-new-validator">Writing new validator</a>
                        <ul>
                            <li><a href="#dynamic-message">Dynamic message</a></li>
                            <li><a href="#example">Example</a></li>
                        </ul>
                    </li>
                    <li><a href="#building">Building</a></li>
                    <li><a href="#contributing">Contributing</a></li>
                </ul>
            </div>
        </div>

        <div class="col-md-9">
            <div class="bv-content">
                <section>
                    <h2 id="writing-new-validator">Writing new validator</h2>
                    <p>A validator has to follow the syntax:</p>
{% highlight javascript %}
(function($) {
    $.fn.bootstrapValidator.validators.validatorName = {
        /**
         * @param {BootstrapValidator} validator The validator plugin instance
         * @param {jQuery} $field The jQuery object represents the field element
         * @param {Object} options The validator options
         * @returns {Boolean}
         */
        validate: function(validator, $field, options) {
            // You can get the field value
            // var value = $field.val();
            //
            // Perform validating
            // ...
            //
            // return true if the field value is valid
            // otherwise return false
        }
    };
}(window.jQuery));
{% endhighlight %}

                    <p>The validator must implement <code>validate()</code> method that returns <code>true</code> if the field is valid, or <code>false</code> otherwise.</p>
                    <p><code>validatorName</code> is the validator name. Since the validators are distinct by the names, <code>validatorName</code> has to be different with <a href="/validators/">built-in validators</a>.</p>

                    <p>To apply the validator to particular field:</p>
{% highlight javascript %}
$(form).bootstrapValidator({
    fields: {
        fieldName: {
            // Replace validatorName with the name of validator
            // validatorOptions will be passed as third parameter of the
            // validate(validator, $field, options) method
            validatorName: validatorOptions
        }
    }
});{% endhighlight %}

                    <div class="bv-box bv-box-info">
                        <h5><i></i>How built-in validators are developed</h5>
                        <p>To see how built-in validators are developed, you can look at their sources located at the <a href="{{ site.repository.source }}/tree/master/src/js/validator">src/js/validator</a> directory.</p>
                    </div>

                    <section>
                        <h3 id="dynamic-message">Dynamic message</h3>
                        <p>If you want to set dynamic error message, the validator must return an object that consists of <code>valid</code> and <code>message</code> members:</p>
{% highlight javascript hl_lines="7 8 13 14" %}
(function($) {
    $.fn.bootstrapValidator.validators.validatorName = {
        validate: function(validator, $field, options) {
            // ... Do your logic checking
            if (...) {
                return {
                    valid: true,    // or false
                    message: 'The error message'
                }
            }

            return {
                valid: false,       // or true
                message: 'Other error message'
            }
        }
    };
}(window.jQuery));
{% endhighlight %}
                    </section>

                    <section>
                        <h3 id="example">Example</h3>
                        <p>The following example illustrates how to develop a simple validator which validate a password. The validator will treat a password as valid, if it satisfies all the conditions below:</p>
                        <ul>
                            <li>Must be more than 8 characters long</li>
                            <li>Must contain at least one upper case character</li>
                            <li>Must contain at least one lower case character</li>
                            <li>Must contain at least one digit</li>
                        </ul>
                        <p>In fact, you can add more conditions to make a secure password.</p>
{% highlight javascript hl_lines="10 15 20 25" %}
(function($) {
    $.fn.bootstrapValidator.validators.password = {
        validate: function(validator, $field, options) {
            var value = $field.val();
            if (value === '') {
                return true;
            }

            // Check the password strength
            if (value.length < 8) {
                return false;
            }

            // The password doesn't contain any uppercase character
            if (value === value.toLowerCase()) {
                return false;
            }

            // The password doesn't contain any uppercase character
            if (value === value.toUpperCase()) {
                return false;
            }

            // The password doesn't contain any digit
            if (value.search(/[0-9]/) < 0) {
                return false;
            }

            return true;
        }
    };
}(window.jQuery));
{% endhighlight %}
                        <div class="bv-example">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#password-form-tab" data-toggle="tab">Try it</a></li>
                                <li><a href="#password-html-tab" data-toggle="tab">HTML</a></li>
                                <li><a href="#password-js-tab" data-toggle="tab">JS</a></li>
                            </ul>

                            <div class="tab-content">
                                <div class="tab-pane active" id="password-form-tab">
                                    <form id="passwordForm" class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-lg-3 control-label">Password</label>
                                            <div class="col-lg-5">
                                                <input type="password" class="form-control" name="pwd" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-lg-5 col-lg-offset-3">
                                                <button type="submit" class="btn btn-default">Validate</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane" id="password-html-tab">
{% highlight html hl_lines="5" %}
<form id="passwordForm" class="form-horizontal">
    <div class="form-group">
        <label class="col-lg-3 control-label">Password</label>
        <div class="col-lg-5">
            <input type="password" class="form-control" name="pwd" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-lg-5 col-lg-offset-3">
            <button type="submit" class="btn btn-default">Validate</button>
        </div>
    </div>
</form>
{% endhighlight %}
                                </div>

                                <div class="tab-pane" id="password-js-tab">
{% highlight javascript hl_lines="2 15 20" %}
$(document).ready(function() {
    $.fn.bootstrapValidator.validators.password = {
        validate: function(validator, $field, options) {
            ...
        }
    };

    $('#passwordForm').bootstrapValidator({
        feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            pwd: {
                validators: {
                    notEmpty: {
                        message: 'The password is required and cannot be empty'
                    },
                    password: {
                        message: 'The password is not valid'
                    }
                }
            }
        }
    });
});
{% endhighlight %}
                                </div>
                            </div>
                        </div>

                        <p>Basically, the validator works fine. It returns <code>false</code> if the password doesn't satisfy any of conditions we define. The limitation here is that the user don't know
                        which condition the password doesn't pass. It informs the same <code>The password is not valid</code> message in all cases.</p>
                        <p>Using <a href="#dynamic-message">dynamic message</a> ability, it's easy to make the validator more friendly.</p>
{% highlight javascript hl_lines="12 13 20 21 28 29 36 37" %}
(function($) {
    $.fn.bootstrapValidator.validators.securePassword = {
        validate: function(validator, $field, options) {
            var value = $field.val();
            if (value === '') {
                return true;
            }

            // Check the password strength
            if (value.length < 8) {
                return {
                    valid: false,
                    message: 'The password must be more than 8 characters long'
                };
            }

            // The password doesn't contain any uppercase character
            if (value === value.toLowerCase()) {
                return {
                    valid: false,
                    message: 'The password must contain at least one upper case character'
                }
            }

            // The password doesn't contain any uppercase character
            if (value === value.toUpperCase()) {
                return {
                    valid: false,
                    message: 'The password must contain at least one lower case character'
                }
            }

            // The password doesn't contain any digit
            if (value.search(/[0-9]/) < 0) {
                return {
                    valid: false,
                    message: 'The password must contain at least one digit'
                }
            }

            return true;
        }
    };
}(window.jQuery));
{% endhighlight %}
                        <p>Now, the form shows exactly condition that we want the password to satisfy.</p>
                        <div class="bv-example">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#secure-password-form-tab" data-toggle="tab">Try it</a></li>
                                <li><a href="#secure-password-html-tab" data-toggle="tab">HTML</a></li>
                                <li><a href="#secure-password-js-tab" data-toggle="tab">JS</a></li>
                            </ul>

                            <div class="tab-content">
                                <div class="tab-pane active" id="secure-password-form-tab">
                                    <form id="securePasswordForm" class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-lg-3 control-label">Password</label>
                                            <div class="col-lg-5">
                                                <input type="password" class="form-control" name="pwd" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-lg-5 col-lg-offset-3">
                                                <button type="submit" class="btn btn-default">Validate</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane" id="secure-password-html-tab">
{% highlight html hl_lines="5" %}
<form id="securePasswordForm" class="form-horizontal">
    <div class="form-group">
        <label class="col-lg-3 control-label">Password</label>
        <div class="col-lg-5">
            <input type="password" class="form-control" name="pwd" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-lg-5 col-lg-offset-3">
            <button type="submit" class="btn btn-default">Validate</button>
        </div>
    </div>
</form>
{% endhighlight %}
                                </div>

                                <div class="tab-pane" id="secure-password-js-tab">
{% highlight javascript hl_lines="2 15 20" %}
$(document).ready(function() {
    $.fn.bootstrapValidator.validators.securePassword = {
        validate: function(validator, $field, options) {
            ...
        }
    };

    $('#securePasswordForm').bootstrapValidator({
        feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            pwd: {
                validators: {
                    notEmpty: {
                        message: 'The password is required and cannot be empty'
                    },
                    securePassword: {
                        message: 'The password is not valid'
                    }
                }
            }
        }
    });
});
{% endhighlight %}
                                </div>
                            </div>
                        </div>
                    </section>
                </section>

                <section>
                    <h2 id="building">Building</h2>

                    <p>BootstrapValidator uses <a href="http://gruntjs.com">grunt</a> to simplify building process.</p>
                    <p>From the BootstrapValidator root directory, install dependencies:</p>
{% highlight bash %}
$ npm install
{% endhighlight %}

                    <p>Then, uses grunt to build:</p>
{% highlight bash %}
$ grunt
{% endhighlight %}

                    <p>If you want grunt to generate scripts whenever the original scripts (located in <code>src</code>) change, use the following command:</p>
{% highlight bash %}
$ grunt watch
{% endhighlight %}

                    <p>The generated scripts (including source and compressed versions) are placed inside the <code>dist</code> directory.</p>
                </section>

                <section>
                    <h2 id="contributing">Contributing</h2>

                    <p>If you develop new validator which might be useful for other one, please contribute it to the project.</p>
                    <p>It can be done via 3 steps:</p>

                    <ul>
                        <li><a href="{{ site.repository.source }}/fork">Fork</a> the project</li>
                        <li>Develop new validator, suggest new feature or fix a bug</li>
                        <li>Pull a new request</li>
                    </ul>

                    <p>All pull requests are welcome <i class="fa fa-heart"></i>.</p>
                </section>
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    $.fn.bootstrapValidator.validators.password = {
        validate: function(validator, $field, options) {
            var value = $field.val();
            if (value === '') {
                return true;
            }

            if (value.length < 8) {
                return false;
            }
            if (value === value.toLowerCase()) {
                return false;
            }
            if (value === value.toUpperCase()) {
                return false;
            }
            if (value.search(/[0-9]/) < 0) {
                return false;
            }

            return true;
        }
    };

    $.fn.bootstrapValidator.validators.securePassword = {
        validate: function(validator, $field, options) {
            var value = $field.val();
            if (value === '') {
                return true;
            }

            // Check the password strength
            if (value.length < 8) {
                return {
                    valid: false,
                    message: 'The password must be more than 8 characters long'
                };
            }

            // The password doesn't contain any uppercase character
            if (value === value.toLowerCase()) {
                return {
                    valid: false,
                    message: 'The password must contain at least one upper case character'
                }
            }

            // The password doesn't contain any uppercase character
            if (value === value.toUpperCase()) {
                return {
                    valid: false,
                    message: 'The password must contain at least one lower case character'
                }
            }

            // The password doesn't contain any digit
            if (value.search(/[0-9]/) < 0) {
                return {
                    valid: false,
                    message: 'The password must contain at least one digit'
                }
            }

            return true;
        }
    };

    $('#passwordForm')
        .bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            submitHandler: function(validator, form) {
                // Do nothing
            },
            fields: {
                pwd: {
                    validators: {
                        notEmpty: {
                            message: 'The password is required and cannot be empty'
                        },
                        password: {
                            message: 'The password is not valid'
                        }
                    }
                }
            }
        })
        .on('success.form.bv', function(e) {
            // Prevent form submission
            e.preventDefault();
        });

    $('#securePasswordForm')
        .bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                pwd: {
                    validators: {
                        notEmpty: {
                            message: 'The password is required and cannot be empty'
                        },
                        securePassword: {
                            message: 'The password is not valid'
                        }
                    }
                }
            }
        })
        .on('success.form.bv', function(e) {
            // Prevent form submission
            e.preventDefault();
        });
});
</script>